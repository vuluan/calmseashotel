;(function(c){c.fn.ajaxSubmit=function(g){if(!this.length){o('ajaxSubmit: skipping submit process - no element selected');return this}var G,O,B,t=this;if(typeof g=='function'){g={success:g}}G=this.attr('method');O=this.attr('action');B=(typeof O==='string')?c.trim(O):'';B=B||window.location.href||'';if(B){B=(B.match(/^([^#]+)/)||[])[1]}g=c.extend(true,{url:B,success:c.ajaxSettings.success,type:G||'GET',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},g);var K={};this.trigger('form-pre-serialize',[this,g,K]);if(K.veto){o('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this}if(g.beforeSerialize&&g.beforeSerialize(this,g)===false){o('ajaxSubmit: submit aborted via beforeSerialize callback');return this}var L=g.traditional;if(L===undefined){L=c.ajaxSettings.traditional}var M,bm,bn,D=this.formToArray(g.semantic);if(g.data){g.extraData=g.data;M=c.param(g.data,L)}if(g.beforeSubmit&&g.beforeSubmit(D,this,g)===false){o('ajaxSubmit: submit aborted via beforeSubmit callback');return this}this.trigger('form-submit-validate',[D,this,g,K]);if(K.veto){o('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this}var H=c.param(D,L);if(M){H=(H?(H+'&'+M):M)}if(g.type.toUpperCase()=='GET'){g.url+=(g.url.indexOf('?')>=0?'&':'?')+H;g.data=null}else{g.data=H}var E=[];if(g.resetForm){E.push(function(){t.resetForm()})}if(g.clearForm){E.push(function(){t.clearForm(g.includeHidden)})}if(!g.dataType&&g.target){var be=g.success||function(){};E.push(function(a){var b=g.replaceTarget?'replaceWith':'html';c(g.target)[b](a).each(be,arguments)})}else if(g.success){E.push(g.success)}g.success=function(a,b,f){var j=g.context||g;for(var k=0,h=E.length;k<h;k++){E[k].apply(j,[a,b,f||t,t])}};var T=c('input:file:enabled[value]',this);var P=T.length>0;var U='multipart/form-data';var V=(t.attr('enctype')==U||t.attr('encoding')==U);var Q=!!(P&&T.get(0).files&&window.FormData);o("fileAPI :"+Q);var bf=(P||V)&&!Q;if(g.iframe!==false&&(g.iframe||bf)){if(g.closeKeepAlive){c.get(g.closeKeepAlive,function(){W(D)})}else{W(D)}}else if((P||V)&&Q){g.progress=g.progress||c.noop;bg(D)}else{c.ajax(g)}this.trigger('form-submit-notify',[this,g]);return this;function bg(j){var k=new FormData();for(var h=0;h<j.length;h++){if(j[h].type=='file')continue;k.append(j[h].name,j[h].value)}t.find('input:file:enabled').each(function(){var a=c(this).attr('name'),b=this.files;if(a){for(var f=0;f<b.length;f++)k.append(a,b[f])}});if(g.extraData){for(var l in g.extraData)k.append(l,g.extraData[l])}g.data=null;var m=c.extend(true,{},c.ajaxSettings,g,{contentType:false,processData:false,cache:false,type:'POST'});m.data=null;var n=m.beforeSend;m.beforeSend=function(b,f){f.data=k;if(b.upload){b.upload.onprogress=function(a){f.progress(a.position,a.total)}}if(n)n.call(f,b,g)};c.ajax(m)}function W(r){var s=t[0],N,y,d,z,I,v,w,i,F,A,R,J;var bh=!!c.fn.prop;if(r){if(bh){for(y=0;y<r.length;y++){N=c(s[r[y].name]);N.prop('disabled',false)}}else{for(y=0;y<r.length;y++){N=c(s[r[y].name]);N.removeAttr('disabled')}}}if(c(':input[name=submit],:input[id=submit]',s).length){alert('Error: Form elements must not have name or id of "submit".');return}d=c.extend(true,{},c.ajaxSettings,g);d.context=d.context||d;I='jqFormIO'+(new Date().getTime());if(d.iframeTarget){v=c(d.iframeTarget);A=v.attr('name');if(A==null)v.attr('name',I);else I=A}else{v=c('<iframe name="'+I+'" src="'+d.iframeSrc+'" />');v.css({position:'absolute',top:'-1000px',left:'-1000px'})}w=v[0];i={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var b=(a==='timeout'?'timeout':'aborted');o('aborting upload... '+b);this.aborted=1;v.attr('src',d.iframeSrc);i.error=b;d.error&&d.error.call(d.context,i,b,a);z&&c.event.trigger("ajaxError",[i,d,b]);d.complete&&d.complete.call(d.context,i,b)}};z=d.global;if(z&&!c.active++){c.event.trigger("ajaxStart")}if(z){c.event.trigger("ajaxSend",[i,d])}if(d.beforeSend&&d.beforeSend.call(d.context,i,d)===false){if(d.global){c.active--}return}if(i.aborted){return}F=s.clk;if(F){A=F.name;if(A&&!F.disabled){d.extraData=d.extraData||{};d.extraData[A]=F.value;if(F.type=="image"){d.extraData[A+'.x']=s.clk_x;d.extraData[A+'.y']=s.clk_y}}}var X=1;var S=2;function Y(a){var b=a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document;return b}var Z=c('meta[name=csrf-token]').attr('content');var ba=c('meta[name=csrf-param]').attr('content');if(ba&&Z){d.extraData=d.extraData||{};d.extraData[ba]=Z}function bb(){var b=t.attr('target'),f=t.attr('action');s.setAttribute('target',I);if(!G){s.setAttribute('method','POST')}if(f!=d.url){s.setAttribute('action',d.url)}if(!d.skipEncodingOverride&&(!G||/post/i.test(G))){t.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'})}if(d.timeout){J=setTimeout(function(){R=true;C(X)},d.timeout)}function j(){try{var a=Y(w).readyState;o('state = '+a);if(a.toLowerCase()=='uninitialized')setTimeout(j,50)}catch(e){o('Server abort: ',e,' (',e.name,')');C(S);J&&clearTimeout(J);J=undefined}}var k=[];try{if(d.extraData){for(var h in d.extraData){k.push(c('<input type="hidden" name="'+h+'">').attr('value',d.extraData[h]).appendTo(s)[0])}}if(!d.iframeTarget){v.appendTo('body');w.attachEvent?w.attachEvent('onload',C):w.addEventListener('load',C,false)}setTimeout(j,15);s.submit()}finally{s.setAttribute('action',f);if(b){s.setAttribute('target',b)}else{t.removeAttr('target')}c(k).remove()}}if(d.forceSync){bb()}else{setTimeout(bb,10)}var bc,p,bi=50,bd;function C(f){if(i.aborted||bd){return}try{p=Y(w)}catch(ex){o('cannot access response document: ',ex);f=S}if(f===X&&i){i.abort('timeout');return}else if(f==S&&i){i.abort('server abort');return}if(!p||p.location.href==d.iframeSrc){if(!R)return}w.detachEvent?w.detachEvent('onload',C):w.removeEventListener('load',C,false);var j='success',k;try{if(R){throw'timeout';}var h=d.dataType=='xml'||p.XMLDocument||c.isXMLDoc(p);o('isXml='+h);if(!h&&window.opera&&(p.body==null||p.body.innerHTML=='')){if(--bi){o('requeing onLoad callback, DOM not available');setTimeout(C,250);return}}var l=p.body?p.body:p.documentElement;i.responseText=l?l.innerHTML:null;i.responseXML=p.XMLDocument?p.XMLDocument:p;if(h)d.dataType='xml';i.getResponseHeader=function(a){var b={'content-type':d.dataType};return b[a]};if(l){i.status=Number(l.getAttribute('status'))||i.status;i.statusText=l.getAttribute('statusText')||i.statusText}var m=(d.dataType||'').toLowerCase();var n=/(json|script|text)/.test(m);if(n||d.textarea){var x=p.getElementsByTagName('textarea')[0];if(x){i.responseText=x.value;i.status=Number(x.getAttribute('status'))||i.status;i.statusText=x.getAttribute('statusText')||i.statusText}else if(n){var u=p.getElementsByTagName('pre')[0];var q=p.getElementsByTagName('body')[0];if(u){i.responseText=u.textContent?u.textContent:u.innerText}else if(q){i.responseText=q.textContent?q.textContent:q.innerText}}}else if(m=='xml'&&!i.responseXML&&i.responseText!=null){i.responseXML=bj(i.responseText)}try{bc=bk(i,m,d)}catch(f){j='parsererror';i.error=k=(f||j)}}catch(f){o('error caught: ',f);j='error';i.error=k=(f||j)}if(i.aborted){o('upload aborted');j=null}if(i.status){j=(i.status>=200&&i.status<300||i.status===304)?'success':'error'}if(j==='success'){d.success&&d.success.call(d.context,bc,'success',i);z&&c.event.trigger("ajaxSuccess",[i,d])}else if(j){if(k==undefined)k=i.statusText;d.error&&d.error.call(d.context,i,j,k);z&&c.event.trigger("ajaxError",[i,d,k])}z&&c.event.trigger("ajaxComplete",[i,d]);if(z&&!--c.active){c.event.trigger("ajaxStop")}d.complete&&d.complete.call(d.context,i,j);bd=true;if(d.timeout)clearTimeout(J);setTimeout(function(){if(!d.iframeTarget)v.remove();i.responseXML=null},100)}var bj=c.parseXML||function(a,b){if(window.ActiveXObject){b=new ActiveXObject('Microsoft.XMLDOM');b.async='false';b.loadXML(a)}else{b=(new DOMParser()).parseFromString(a,'text/xml')}return(b&&b.documentElement&&b.documentElement.nodeName!='parsererror')?b:null};var bl=c.parseJSON||function(a){return window['eval']('('+a+')')};var bk=function(a,b,f){var j=a.getResponseHeader('content-type')||'',k=b==='xml'||!b&&j.indexOf('xml')>=0,h=k?a.responseXML:a.responseText;if(k&&h.documentElement.nodeName==='parsererror'){c.error&&c.error('parsererror')}if(f&&f.dataFilter){h=f.dataFilter(h,b)}if(typeof h==='string'){if(b==='json'||!b&&j.indexOf('json')>=0){h=bl(h)}else if(b==="script"||!b&&j.indexOf("javascript")>=0){c.globalEval(h)}}return h}}};c.fn.ajaxForm=function(l){if(this.length===0){var m={s:this.selector,c:this.context};if(!c.isReady&&m.s){o('DOM not ready, queuing ajaxForm');c(function(){c(m.s,m.c).ajaxForm(l)});return this}o('terminating; zero elements found by selector'+(c.isReady?'':' (DOM not ready)'));return this}return this.ajaxFormUnbind().bind('submit.form-plugin',function(a){if(!a.isDefaultPrevented()){a.preventDefault();c(this).ajaxSubmit(l)}}).bind('click.form-plugin',function(a){var b=a.target;var f=c(b);if(!(f.is(":submit,input:image"))){var j=f.closest(':submit');if(j.length==0){return}b=j[0]}var k=this;k.clk=b;if(b.type=='image'){if(a.offsetX!=undefined){k.clk_x=a.offsetX;k.clk_y=a.offsetY}else if(typeof c.fn.offset=='function'){var h=f.offset();k.clk_x=a.pageX-h.left;k.clk_y=a.pageY-h.top}else{k.clk_x=a.pageX-b.offsetLeft;k.clk_y=a.pageY-b.offsetTop}}setTimeout(function(){k.clk=k.clk_x=k.clk_y=null},100)})};c.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin')};c.fn.formToArray=function(a){var b=[];if(this.length===0){return b}var f=this[0];var j=a?f.getElementsByTagName('*'):f.elements;if(!j){return b}var k,h,l,m,n,x,u;for(k=0,x=j.length;k<x;k++){n=j[k];l=n.name;if(!l){continue}if(a&&f.clk&&n.type=="image"){if(!n.disabled&&f.clk==n){b.push({name:l,value:c(n).val(),type:n.type});b.push({name:l+'.x',value:f.clk_x},{name:l+'.y',value:f.clk_y})}continue}m=c.fieldValue(n,true);if(m&&m.constructor==Array){for(h=0,u=m.length;h<u;h++){b.push({name:l,value:m[h]})}}else if(m!==null&&typeof m!='undefined'){b.push({name:l,value:m,type:n.type})}}if(!a&&f.clk){var q=c(f.clk),r=q[0];l=r.name;if(l&&!r.disabled&&r.type=='image'){b.push({name:l,value:q.val()});b.push({name:l+'.x',value:f.clk_x},{name:l+'.y',value:f.clk_y})}}return b};c.fn.formSerialize=function(a){return c.param(this.formToArray(a))};c.fn.fieldSerialize=function(k){var h=[];this.each(function(){var a=this.name;if(!a){return}var b=c.fieldValue(this,k);if(b&&b.constructor==Array){for(var f=0,j=b.length;f<j;f++){h.push({name:a,value:b[f]})}}else if(b!==null&&typeof b!='undefined'){h.push({name:this.name,value:b})}});return c.param(h)};c.fn.fieldValue=function(a){for(var b=[],f=0,j=this.length;f<j;f++){var k=this[f];var h=c.fieldValue(k,a);if(h===null||typeof h=='undefined'||(h.constructor==Array&&!h.length)){continue}h.constructor==Array?c.merge(b,h):b.push(h)}return b};c.fieldValue=function(a,b){var f=a.name,j=a.type,k=a.tagName.toLowerCase();if(b===undefined){b=true}if(b&&(!f||a.disabled||j=='reset'||j=='button'||(j=='checkbox'||j=='radio')&&!a.checked||(j=='submit'||j=='image')&&a.form&&a.form.clk!=a||k=='select'&&a.selectedIndex==-1)){return null}if(k=='select'){var h=a.selectedIndex;if(h<0){return null}var l=[],m=a.options;var n=(j=='select-one');var x=(n?h+1:m.length);for(var u=(n?h:0);u<x;u++){var q=m[u];if(q.selected){var r=q.value;if(!r){r=(q.attributes&&q.attributes['value']&&!(q.attributes['value'].specified))?q.text:q.value}if(n){return r}l.push(r)}}return l}return c(a).val()};c.fn.clearForm=function(a){return this.each(function(){c('input,select,textarea',this).clearFields(a)})};c.fn.clearFields=c.fn.clearInputs=function(f){var j=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();if(j.test(a)||b=='textarea'||(f&&/hidden/.test(a))){this.value=''}else if(a=='checkbox'||a=='radio'){this.checked=false}else if(b=='select'){this.selectedIndex=-1}})};c.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset()}})};c.fn.enable=function(a){if(a===undefined){a=true}return this.each(function(){this.disabled=!a})};c.fn.selected=function(f){if(f===undefined){f=true}return this.each(function(){var a=this.type;if(a=='checkbox'||a=='radio'){this.checked=f}else if(this.tagName.toLowerCase()=='option'){var b=c(this).parent('select');if(f&&b[0]&&b[0].type=='select-one'){b.find('option').selected(false)}this.selected=f}})};c.fn.ajaxSubmit.debug=false;function o(){if(!c.fn.ajaxSubmit.debug)return;var a='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(a)}else if(window.opera&&window.opera.postError){window.opera.postError(a)}}})(jQuery);